<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Carnet — Animation réaliste et interactive</title>
  <style>
    :root {
      --bg:#0a0f1f;
      --paper:#fffdf8;
      --shadow:0 10px 30px rgba(0,0,0,0.5);
    }
    *{margin:0;padding:0;box-sizing:border-box;}
    body{
      min-height:100vh;
      display:flex;
      flex-direction:column;
      align-items:center;
      justify-content:center;
      background:radial-gradient(circle at 30% 30%, #111827, #020617 80%);
      font-family:"Poppins", sans-serif;
      overflow-x:hidden;
      color:white;
      position:relative;
      padding:10px;
    }

    /* --- Titre --- */
    .title{
      font-size:2rem;
      font-weight:700;
      text-transform:uppercase;
      letter-spacing:2px;
      margin:20px 10px;
      background:linear-gradient(90deg,#60a5fa,#818cf8,#c084fc);
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      text-shadow:0 0 10px rgba(96,165,250,0.5);
      animation: glow 3s ease-in-out infinite;
      text-align:center;
    }
    @keyframes glow {
      0%,100% { text-shadow:0 0 10px rgba(96,165,250,0.5),0 0 20px rgba(96,165,250,0.3); }
      50% { text-shadow:0 0 20px rgba(129,140,248,0.9),0 0 40px rgba(192,132,252,0.6); }
    }

    /* --- Livre --- */
    .book{
      position:relative;
      width:90vw;
      max-width:900px;
      aspect-ratio:2/1.3;
      perspective:2000px;
      display:flex;
      justify-content:center;
      align-items:center;
      margin-top:10px;
    }

    .page{
      position:absolute;
      width:50%;
      height:100%;
      top:0;
      background:var(--paper);
      overflow:hidden;
      border-radius:10px;
      box-shadow:var(--shadow);
      backface-visibility:hidden;
      transform-style:preserve-3d;
      transition:transform 0.9s ease-in-out, box-shadow 0.4s ease-in-out;
      cursor:pointer;
      display:flex;
      justify-content:center;
      align-items:center;
    }

    .page img{
      width:100%;
      height:100%;
      object-fit:fill;
      display:block;
      user-select:none;
      pointer-events:none;
    }

    .left-page{ left:0; transform-origin:right center; z-index:1; }
    .right-page{ right:0; transform-origin:left center; z-index:2; }

    /* Animations fluide */
    .right-page.turn-next {
      animation: turnNext 0.9s ease-in-out forwards;
      z-index:3;
    }
    .left-page.turn-prev {
      animation: turnPrev 0.9s ease-in-out forwards;
      z-index:3;
    }

    @keyframes turnNext {
      0% { transform: rotateY(0deg); }
      50% { transform: rotateY(-90deg); box-shadow:-15px 10px 30px rgba(0,0,0,0.6);}
      100% { transform: rotateY(-180deg); box-shadow:-5px 10px 20px rgba(0,0,0,0.4);}
    }

    @keyframes turnPrev {
      0% { transform: rotateY(0deg); }
      50% { transform: rotateY(90deg); box-shadow:15px 10px 30px rgba(0,0,0,0.6);}
      100% { transform: rotateY(180deg); box-shadow:5px 10px 20px rgba(0,0,0,0.4);}
    }

    /* --- Contrôles --- */
    .controls{
      margin:25px 0 10px;
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
    }
    button{
      background:linear-gradient(90deg,#6366f1,#60a5fa);
      color:#fff;
      border:none;
      border-radius:6px;
      padding:10px 20px;
      cursor:pointer;
      font-weight:bold;
      transition:transform 0.2s;
      box-shadow:0 0 10px rgba(96,165,250,0.4);
    }
    button:hover{transform:scale(1.05);}
    button:active{transform:scale(0.95);}
    #pageIndicator{
      margin-top:10px;
      font-size:16px;
      color:#cbd5e1;
      text-align:center;
    }

    footer{
      text-align:center;
      margin:20px 0;
      font-family:'Old English Text MT', 'Gothic', 'Blackletter', serif;
      font-size:0.9rem;
    }

    /* --- Responsive --- */
    @media (max-width:900px){
      .book{width:95vw;}
    }

    @media (max-width:768px){
      .title{font-size:1.6rem;}
      .book{aspect-ratio:2/1.5;}
      button{padding:8px 14px;font-size:0.9rem;}
    }

    @media (max-width:580px){
      .title{font-size:1.4rem;}
      .book{flex-direction:column;aspect-ratio:auto;width:100%;}
      .page{
        position:relative;
        width:92%;
        height:auto;
        margin:10px auto;
        transform:none!important;
        animation:none!important;
        box-shadow:var(--shadow);
        cursor:auto;
      }
      .page img{
        width:100%;
        height:auto;
        object-fit:contain;
        border-radius:10px;
      }
      .left-page,.right-page{transform:none;position:relative;}
      .controls{gap:8px;}
      button{font-size:0.85rem;padding:7px 12px;}
      #pageIndicator{font-size:14px;}
    }

    @media (max-width:400px){
      .title{font-size:1.2rem;}
      button{font-size:0.8rem;padding:6px 10px;}
      footer{font-size:0.8rem;}
    }
  </style>
</head>
<body>
  <h1 class="title">Le carn's numérique</h1>

  <div class="book" id="book">
    <div class="page left-page" id="leftPage"><img src="carnet/vide.jpg" alt="page gauche"></div>
    <div class="page right-page" id="rightPage"><img src="carnet/vide.jpg" alt="page droite"></div>
  </div>

  <div class="controls">
    <button id="firstContentPrev">⏮ Pages précédentes avec contenu</button>
    <button id="prevBtn">◀ Précédent</button>
    <button id="nextBtn">Suivant ▶</button>
    <button id="firstContentNext">Pages suivantes avec contenu ⏭</button>
  </div>
  <div id="pageIndicator">Page 1 / 120</div>

  <footer>Vespula 84 — Promotion 2025</footer>

  <script>
    const TOTAL_PAGES = 120;
    const pages = Array.from({length:TOTAL_PAGES}, (_,i)=>
      [0,3,13,14,19,21,22,23,24,25,27,37,53,58,59,60,61,62,74,75,76,77,82,83,84,85,91,119]
        .includes(i) ? `carnet/page${i}.jpg` : 'carnet/vide.jpg'
    );

    let current = 0;
    const rightPage = document.getElementById('rightPage');
    const leftPage = document.getElementById('leftPage');
    const leftImg = leftPage.querySelector('img');
    const rightImg = rightPage.querySelector('img');
    const indicator = document.getElementById('pageIndicator');
    let isAnimating = false;

    function updatePages(){
      leftImg.src = pages[current] || '';
      rightImg.src = pages[current+1] || '';
      indicator.textContent = `Page ${Math.min(current+1, TOTAL_PAGES)} / ${TOTAL_PAGES}`;
    }

    function nextPage(){
      if(current < TOTAL_PAGES - 2 && !isAnimating){
        isAnimating = true;
        rightPage.classList.add('turn-next');
        setTimeout(()=>{
          current += 2;
          updatePages();
          rightPage.classList.remove('turn-next');
          isAnimating = false;
        },900);
      }
    }

    function prevPage(){
      if(current > 0 && !isAnimating){
        isAnimating = true;
        leftPage.classList.add('turn-prev');
        setTimeout(()=>{
          current -= 2;
          updatePages();
          leftPage.classList.remove('turn-prev');
          isAnimating = false;
        },900);
      }
    }

    function nextContentPage(){
      for(let i = current + 2; i < TOTAL_PAGES; i+=2){
        if(pages[i] !== 'carnet/vide.jpg' || pages[i+1] !== 'carnet/vide.jpg'){
          current = i;
          updatePages();
          break;
        }
      }
    }

    function prevContentPage(){
      for(let i = current - 2; i >= 0; i-=2){
        if(pages[i] !== 'carnet/vide.jpg' || pages[i+1] !== 'carnet/vide.jpg'){
          current = i;
          updatePages();
          break;
        }
      }
    }

    document.getElementById('nextBtn').addEventListener('click', nextPage);
    document.getElementById('prevBtn').addEventListener('click', prevPage);
    document.getElementById('firstContentNext').addEventListener('click', nextContentPage);
    document.getElementById('firstContentPrev').addEventListener('click', prevContentPage);

    rightPage.addEventListener('click', nextPage);
    leftPage.addEventListener('click', prevPage);

    updatePages();
  </script>
</body>
</html>
